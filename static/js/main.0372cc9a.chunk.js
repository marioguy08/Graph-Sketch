(this["webpackJsonpgraph-sketch"]=this["webpackJsonpgraph-sketch"]||[]).push([[0],{40:function(t,e,a){},41:function(t,e,a){},87:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a(9),i=a.n(s),r=a(30),o=a.n(r),l=(a(40),a.p,a(41),a(19)),d=a(8),c=a(31),h=a(32),u=a(35),g=a(34),f=a(13),p=a.n(f),b=a(7),j=a(33),x=1,v=1,M=1,y=new j.a,O=i.a.createRef(),m=function(t){Object(u.a)(a,t);var e=Object(g.a)(a);function a(){var t;Object(c.a)(this,a);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={isBipartite:!0,delete:!1,color:!1,numComponents:0,undirected:!0,canvas:[],lines:[],loops:[],bridgeDict:{},showBridges:!1,adjList:{},edgenodestart:[null,null,null]},t.generateNode=function(t){var e={};y.length>0?(e={id:y.pop(),x:t.x,y:t.y,width:40,height:40,fill:"white"},x-=1):e={id:x,x:t.x,y:t.y,width:40,height:40,fill:"white"};return e},t.handleClick=function(e){if(1!=t.state.delete){if(!(e.target===e.target.getStage()))return;var a=e.target.getStage().getPointerPosition(),n=t.generateNode(a);x+=1,t.setState((function(t){return{canvas:[].concat(Object(d.a)(t.canvas),[Object(l.a)({},n)]),edgenodestart:[null,null,null]}}),(function(){return t.genAdjlist()}))}},t.handleDragStart=function(t){t.target.moveToTop(),t.target.to({shadowOffsetX:0,shadowOffsetY:0,shadowBlur:10,shadowColor:"black",scaleX:1.15,scaleY:1.15})},t.handleDragEnd=function(e){for(var a=Object(d.a)(t.state.canvas),n=e.target.attrs.id,s=0;s<a.length;s+=1)if(a[s].id===parseInt(n)){a[s].x=e.target.attrs.x,a[s].y=e.target.attrs.y;break}var i=Object(d.a)(t.state.loops);for(s=0;s<i.length;s+=1)if(i[s].nodeid===n){i[s].x=e.target.attrs.x,i[s].y=e.target.attrs.y-40;break}t.setState({loops:i,canvas:a}),e.target.to({duration:.5,easing:p.a.Easings.ElasticEaseOut,scaleX:1,scaleY:1,shadowBlur:0})},t.addEdge=function(e){if(!0!==t.state.color||0!=t.state.delete){var a=O.current;if(!0===t.state.delete){var n=e.target.attrs.id,s=a.findOne("#"+e.target.attrs.id),i=a.find(".line"),r={};for(A=0;A<i.length;A+=1)i[A].attrs.startid!==s.attrs.id&&i[A].attrs.endid!==s.attrs.id||(r[i[A].attrs.id]=!0);var o=Object(d.a)(t.state.lines);for(A=o.length-1;A>-1;A-=1)"line"+o[A].id in r&&o.splice(A,1);t.setState({lines:o});for(B=Object(d.a)(t.state.canvas),A=0;A<B.length;A+=1)if(parseInt(B[A].id)===parseInt(s.attrs.id)){B.splice(A,1);break}t.setState({canvas:B}),y.push(parseInt(n));var c=Object(d.a)(t.state.loops);for(A=0;A<c.length;A+=1)if(c[A].nodeid===n){c.splice(A,1);break}return t.setState({loops:c},(function(){return t.genAdjlist()})),void t.setState({edgenodestart:[null,null,null]})}if(null==t.state.edgenodestart[0])t.setState({edgenodestart:[e.target.attrs.id,e.target.attrs.x,e.target.attrs.y]});else{if(e.target.attrs.id===t.state.edgenodestart[0]){if(void 0===a.findOne("#loop"+e.target.attrs.id)){t.setState({edgenodestart:[null,null,null]});var h=a.findOne("#label"+e.target.attrs.id);e.target.moveToTop(),h.moveToTop();var u={nodeid:e.target.attrs.id,id:M,x:e.target.attrs.x,y:e.target.attrs.y-40,width:25,height:40};M+=1;var g=t.state.loops.concat(u);return t.setState({loops:g},(function(){return t.genAdjlist()})),void t.setState({edgenodestart:[null,null,null]})}return void t.setState({edgenodestart:[null,null,null]})}var f=0,p=t.state.edgenodestart[0],b=t.state.edgenodestart[1],j=t.state.edgenodestart[2],x=e.target.attrs.id,m=e.target.attrs.x,k=e.target.attrs.y,S=(i=a.find(".line"),0);A=0;for(A=0;A<i.length;A+=1)(i[A].attrs.startid===p&&i[A].attrs.endid===x||i[A].attrs.startid===x&&i[A].attrs.endid===p)&&(f=1,S+=1);var w,I=-50;f=0;b>=m&&(f=1);var C=b-m,L=j-k;if(w=Math.atan2(-L,C),0===S)b+=.5*Math.cos(w+Math.PI)*50,j+=I*(.5*Math.sin(w+Math.PI)),m+=.5*Math.cos(w)*50,k+=I*(.5*Math.sin(w));else if(1===S)1!=f?(b+=.5*Math.cos(w+Math.PI-.5)*50,j+=I*(.5*Math.sin(w+Math.PI-.5)),m+=.5*Math.cos(w+.5)*50,k+=I*(.5*Math.sin(w+.5))):(b+=.5*Math.cos(w+Math.PI+.5)*50,j+=I*(.5*Math.sin(w+Math.PI+.5)),m+=.5*Math.cos(w-.5)*50,k+=I*(.5*Math.sin(w-.5)));else{if(2!==S)return void t.setState({edgenodestart:[null,null,null]});1!=f?(b+=.5*Math.cos(w+Math.PI+.5)*50,j+=I*(.5*Math.sin(w+Math.PI+.5)),m+=.5*Math.cos(w-.5)*50,k+=I*(.5*Math.sin(w-.5))):(b+=.5*Math.cos(w+Math.PI-.5)*50,j+=I*(.5*Math.sin(w+Math.PI-.5)),m+=.5*Math.cos(w+.5)*50,k+=I*(.5*Math.sin(w+.5)))}var P=!1;S>0&&(P=!0);var D={id:v,startid:p,endid:x,points:[b,j,m,k],isgrouped:P,fill:"black",groupnumber:S+1};t.setState((function(t){return{lines:[].concat(Object(d.a)(t.lines),[Object(l.a)({},D)])}}),(function(){return t.genAdjlist()})),t.setState({edgenodestart:[null,null,null]}),v+=1}}else{for(var B=Object(d.a)(t.state.canvas),A=0;A<B.length;A+=1)if(B[A].id===parseInt(e.target.attrs.id)){"white"===B[A].fill?B[A].fill="#007bff":"#007bff"===B[A].fill?B[A].fill="#ff5353":B[A].fill="white";break}t.setState({canvas:B,edgenodestart:[null,null,null]})}},t.updateLine=function(t){for(var e=t.target.attrs.id,a=O.current,n=a.find(".line"),s=0;s<n.length;s+=1){if(n[s].attrs.startid===e){var i=a.findOne("#"+n[s].attrs.startid),r=a.findOne("#"+n[s].attrs.endid),o=0,l=i.attrs.x,d=i.attrs.y;l>=(p=r.attrs.x)&&(o=1);var c=-50,h=l-p,u=d-(b=r.attrs.y),g=Math.atan2(-u,h);if(1===n[s].attrs.groupnumber||!1===n[s].attrs.isgrouped){var f=n[s].attrs.points;l=t.target.attrs.x+.5*Math.cos(g+Math.PI)*50,d=t.target.attrs.y+c*(.5*Math.sin(g+Math.PI)),p+=.5*Math.cos(g)*50,b+=c*(.5*Math.sin(g)),f[0]=l,f[1]=d,f[2]=p,f[3]=b,n[s].attrs.points=f}else if(2===n[s].attrs.groupnumber){1!=o?(l+=.5*Math.cos(g+Math.PI-.5)*50,d+=c*(.5*Math.sin(g+Math.PI-.5)),p+=.5*Math.cos(g+.5)*50,b+=c*(.5*Math.sin(g+.5))):(l+=.5*Math.cos(g+Math.PI+.5)*50,d+=c*(.5*Math.sin(g+Math.PI+.5)),p+=.5*Math.cos(g-.5)*50,b+=c*(.5*Math.sin(g-.5))),(f=n[s].attrs.points)[0]=l,f[1]=d,f[2]=p,f[3]=b,n[s].attrs.points=f}else if(3===n[s].attrs.groupnumber){1!=o?(l+=.5*Math.cos(g+Math.PI+.5)*50,d+=c*(.5*Math.sin(g+Math.PI+.5)),p+=.5*Math.cos(g-.5)*50,b+=c*(.5*Math.sin(g-.5))):(l+=.5*Math.cos(g+Math.PI-.5)*50,d+=c*(.5*Math.sin(g+Math.PI-.5)),p+=.5*Math.cos(g+.5)*50,b+=c*(.5*Math.sin(g+.5))),(f=n[s].attrs.points)[0]=l,f[1]=d,f[2]=p,f[3]=b,n[s].attrs.points=f}}if(n[s].attrs.endid===e){i=a.findOne("#"+n[s].attrs.startid),r=a.findOne("#"+n[s].attrs.endid),l=i.attrs.x,d=i.attrs.y;var p=r.attrs.x,b=r.attrs.y,j=-50;o=0,l=i.attrs.x,d=i.attrs.y;l>=(p=r.attrs.x)&&(o=1);var x=l-p,v=d-(b=r.attrs.y),M=Math.atan2(-v,x);if(1===n[s].attrs.groupnumber||!1===n[s].attrs.isgrouped){f=n[s].attrs.points;l+=.5*Math.cos(M+Math.PI)*50,d+=j*(.5*Math.sin(M+Math.PI)),p+=.5*Math.cos(M)*50,b+=j*(.5*Math.sin(M)),f[2]=p,f[3]=b,f[0]=l,f[1]=d,n[s].attrs.points=f}else if(2===n[s].attrs.groupnumber){1!=o?(l+=.5*Math.cos(M+Math.PI-.5)*50,d+=j*(.5*Math.sin(M+Math.PI-.5)),p+=.5*Math.cos(M+.5)*50,b+=j*(.5*Math.sin(M+.5))):(l+=.5*Math.cos(M+Math.PI+.5)*50,d+=j*(.5*Math.sin(M+Math.PI+.5)),p+=.5*Math.cos(M-.5)*50,b+=j*(.5*Math.sin(M-.5))),(f=n[s].attrs.points)[0]=l,f[1]=d,f[2]=p,f[3]=b,n[s].attrs.points=f}else if(3===n[s].attrs.groupnumber){1!=o?(l+=.5*Math.cos(M+Math.PI+.5)*50,d+=j*(.5*Math.sin(M+Math.PI+.5)),p+=.5*Math.cos(M-.5)*50,b+=j*(.5*Math.sin(M-.5))):(l+=.5*Math.cos(M+Math.PI-.5)*50,d+=j*(.5*Math.sin(M+Math.PI-.5)),p+=.5*Math.cos(M+.5)*50,b+=j*(.5*Math.sin(M+.5))),(f=n[s].attrs.points)[0]=l,f[1]=d,f[2]=p,f[3]=b,n[s].attrs.points=f}}}var y=a.findOne("#"+e),m=a.findOne("#loop"+e);m&&m.position({x:y.attrs.x,y:y.attrs.y-40});var k=a.findOne("#label"+e);k&&(k.moveToTop(),k.position({x:e>9?y.attrs.x-9:y.attrs.x-4,y:y.attrs.y-5}))},t.genAdjlist=function(e){for(var a=O.current.find(".line"),n={},s=0;s<t.state.canvas.length;s+=1)n[t.state.canvas[s].id]=[];for(s=0;s<t.state.loops.length;s+=1){var i=t.state.loops[s].nodeid;n[i].push(i)}for(s=0;s<a.length;s+=1){var r=[a[s].attrs.startid,a[s].attrs.endid];n[r[0]].push(parseInt(r[1])),!0!==t.state.undirected&&!0!==e||n[r[1]].push(parseInt(r[0]))}if(e||t.setState({adjList:n},(function(){t.isBipartite(),t.numComponents(),t.findBridges()})),!0===e)return n},t.numComponents=function(){var e=0,a={},n=[];for(var s in t.state.adjList)if(s in a===!1)for(e+=1,n.push(s),a[s]=!0;n.length>0;)for(var i=n.shift(),r=0;r<t.state.adjList[i].length;r+=1)t.state.adjList[i][r]in a===!1&&(n.push(t.state.adjList[i][r]),a[t.state.adjList[i][r]]=!0);t.setState({numComponents:e})},t.topologicalSort=function(){var e={},a={},n=[];for(var s in t.state.adjList)if(s in e!=1&&i(s,a,e,n,t.state.adjList))return[];return n.reverse(),n;function i(t,e,a,n,s){if(t in a)return!1;if(t in e)return!0;e[t]=!0;for(var r=0;r<s[t].length;r+=1){if(i(s[t][r],e,a,n,s))return!0}return delete e[t],a[t]=!0,n.push(","),n.push(parseInt(t)),!1}},t.isBipartite=function(){var e=!0;if(0===t.state.lines.length&&0===t.state.loops.length);else{if(!1===t.state.undirected)var a=t.genAdjlist(!0);else a=t.state.adjList;var n={};for(var s in t.state.adjList)if(s in n===!1){var i=[];for(i.push([s,!1,-1]),n[s]=!1;i.length>0;)for(var r=i.shift(),o=0;o<a[r[0]].length;o+=1)if(a[r[0]][o]!==r[2]&&(a[r[0]][o]in n!==!0||n[a[r[0]][o]]==r[1])){if(a[r[0]][o]in n===!0&&n[a[r[0]][o]]===r[1]){e=!1;break}n[a[r[0]][o]]=!r[1],i.push([a[r[0]][o],!r[1],r[0]])}}}t.setState({isBipartite:e})},t.findBridges=function(){var e={};if(!0===t.state.undirected&&!0===t.state.showBridges){var a={},n={};for(var s in t.state.adjList)s in a===!1&&i(parseInt(s),-1,a,n,1,t.state.adjList)}function i(t,a,n,s,r,o){if(n[t]=r,s[t]=r,r+=1,o[t]!=[])for(var l=0;l<o[t].length;l+=1)if(o[t][l]!==a)if(o[t][l]in n)s[t]=Math.min(n[o[t][l]],s[t]);else if(i(o[t][l],t,n,s,r,o),s[o[t][l]]>n[t]){for(var d=0,c=0;c<o[t].length;c+=1)o[t][c]===o[t][l]&&(d+=1);d<2&&(e[[t,o[t][l]]]=!0)}else s[t]=Math.min(s[t],s[o[t][l]])}t.setState({bridgeDict:e},(function(){return t.showBridges()}))},t.deleteLine=function(e){for(var a=Object(d.a)(t.state.lines),n=0;n<a.length;n+=1)if("line"+a[n].id===e.target.attrs.id){a.splice(n,1);break}t.setState({lines:a},(function(){return t.genAdjlist()}))},t.deleteLoop=function(e){for(var a=Object(d.a)(t.state.loops),n=0;n<a.length;n+=1)if("loop"+a[n].nodeid===e.target.attrs.id){a.splice(n,1);break}t.setState({loops:a},(function(){return t.genAdjlist()}))},t.changeUndirected=function(e){e?t.setState((function(t){return{undirected:!0}}),(function(){return t.genAdjlist()})):t.setState((function(t){return{undirected:!1}}),(function(){return t.genAdjlist()}))},t.createntries=function(){var e=[];for(var a in e.push(Object(n.jsx)("li",{className:"listitems",style:{margin:"13px",minWidth:"110px"},children:"Adjacency List:"},a)),t.state.adjList){for(var s=[],i=0;i<t.state.adjList[a].length;i+=1)s.push(t.state.adjList[a][i]);s=s.toString(),e.push(Object(n.jsxs)("li",{className:"listitems",style:{margin:"13px",minWidth:"110px",letterSpacing:"2px"},children:[a,":",s]},a))}return e},t.showBridges=function(){for(var e=t.state.lines,a=0;a<e.length;a+=1)if(!0===t.state.undirected){var n=e[a].startid.toString()+","+e[a].endid.toString(),s=e[a].endid.toString()+","+e[a].startid.toString();n in t.state.bridgeDict||s in t.state.bridgeDict?e[a].fill="red":e[a].fill="black"}else e[a].fill="black";t.setState({lines:e})},t}return Object(h.a)(a,[{key:"render",value:function(){var t=this,e=this.topologicalSort();e.slice(-1),e.length<1&&this.state.canvas.length>0&&(e="Cycle Detected!");var a=this.createntries(),s=(this.state.isBipartite?"Bipartite: True\n":"Bipartite: False\n")+"Components: "+(this.state.undirected?this.state.numComponents:"N/A")+"\nV: "+this.state.canvas.length+"\nE: "+(this.state.lines.length+this.state.loops.length);return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",boxShadow:"rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px",justifyContent:"space-between"},children:[Object(n.jsx)("h1",{className:"titletext",children:"Graph Sketcher"}),Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"5rem"},children:[!0===this.state.undirected?Object(n.jsxs)("p",{className:"checktext",children:["Show Bridges ",Object(n.jsx)("input",{type:"checkbox",readOnly:!0,className:"checkbox",checked:!0===this.state.showBridges,onClick:function(){return t.setState((function(t){return{showBridges:!t.showBridges}}),(function(){return t.genAdjlist()}))}})]}):null,Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsx)("button",{className:"optionsbuttons left",style:!1===this.state.delete&&0==this.state.color?{backgroundColor:"#272942"}:{backgroundColor:"#4a508b"},onClick:function(){return t.setState({delete:!1,color:!1})},children:"DRAW"}),Object(n.jsx)("button",{className:"optionsbuttons",style:!0===this.state.delete?{backgroundColor:"#272942"}:{backgroundColor:"#4a508b"},onClick:function(){return t.setState({delete:!0,color:!1})},children:"DELETE"}),Object(n.jsx)("button",{className:"optionsbuttons right",style:!1===this.state.delete&&1==this.state.color?{backgroundColor:"#272942"}:{backgroundColor:"#4a508b"},onClick:function(){return t.setState({color:!0,delete:!1})},children:"COLOR"})]}),"\xa0",Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsx)("button",{className:"optionsbuttons left",style:this.state.undirected?{backgroundColor:"#272942"}:{backgroundColor:"#4a508b"},onClick:function(){return t.changeUndirected(!0)},children:"UNDIRECTED"}),Object(n.jsx)("button",{className:"optionsbuttons right",style:this.state.undirected?{backgroundColor:"#4a508b"}:{backgroundColor:"#272942"},onClick:function(){return t.changeUndirected(!1)},children:"DIRECTED"})]})]})]}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsx)("ul",{className:"adjListContainer",style:{height:"100%",padding:"0px",margin:"0px",textAlign:"left",boxShadow:"rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px",listStyleType:"none"},children:a}),!1===this.state.undirected?Object(n.jsxs)("p",{className:"topo",style:{boxShadow:"rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px"},children:["Topological Ordering: ",e]}):null]}),Object(n.jsxs)(b.Stage,{width:window.innerWidth-20,height:window.innerHeight+400,onClick:this.handleClick,ref:O,style:{left:0,position:"absolute"},children:[Object(n.jsxs)(b.Layer,{children:[this.state.loops.map((function(e,a){e.id;var s=e.x,i=e.y,r=e.width,o=e.height,l=e.nodeid;return Object(n.jsx)(b.Ellipse,{id:"loop"+l,nodeid:l,x:s,y:i,radiusX:r,radiusY:o,stroke:"black",strokeWidth:3,onClick:t.deleteLoop},a)})),this.state.lines.map((function(e,a){var s=e.points,i=e.startid,r=e.endid,o=e.isgrouped,l=e.groupnumber,d=e.id,c=e.fill;return t.state.undirected?Object(n.jsx)(b.Line,{id:"line"+d,startid:i,endid:r,points:s,stroke:c,strokeWidth:4,isgrouped:o,groupnumber:l,name:"line",onClick:t.deleteLine},a):Object(n.jsx)(b.Arrow,{id:"line"+d,startid:i,endid:r,points:s,stroke:c,strokeWidth:4,isgrouped:o,groupnumber:l,name:"line",pointerWidth:7,fill:"black",onClick:t.deleteLine},a)})),this.state.canvas.map((function(e,a){var s=e.height,i=e.width,r=e.x,o=e.y,l=e.id,d=e.fill;return Object(n.jsx)(b.Circle,{id:l.toString(),x:r,y:o,width:i,height:s,stroke:"black",strokeWidth:3,draggable:"true",fill:d,onDragStart:t.handleDragStart,onDragMove:t.updateLine,onDragEnd:t.handleDragEnd,onClick:t.addEdge,name:"node"},a)})),this.state.canvas.map((function(t,e){t.height,t.width;var a=t.x,s=t.y,i=t.id;t.fill;return Object(n.jsx)(b.Text,{id:"label"+i,x:i>9?a-9:a-4,y:s-5,fontFamily:"Lato, sans-serif",fontStyle:"bold",fontSize:15,text:i.toString(),listening:!1})}))]}),Object(n.jsx)(b.Layer,{children:Object(n.jsxs)(b.Group,{draggable:!0,children:[Object(n.jsx)(b.Rect,{x:window.innerWidth-299,y:35,width:200,height:100,fill:"white",shadowBlur:15,shadowOpacity:.5,shadowOffsetX:6,shadowOffsetY:6,cornerRadius:7}),Object(n.jsx)(b.Text,{x:window.innerWidth-299,y:40,fontFamily:"Lato, sans-serif",fontSize:18,fontStyle:"bold",text:s,align:"center",lineHeight:1.3,width:200})]})})]})]})})]})}}]),a}(s.Component);var k=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(m,{})})},S=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,88)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),n(t),s(t),i(t),r(t)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),S()}},[[87,1,2]]]);
//# sourceMappingURL=main.0372cc9a.chunk.js.map